# Spotify履歴ダッシュボード 要件定義書

## 1. プロジェクト概要

### 1.1 目的
Spotifyの再生履歴データを可視化し、ユーザーの音楽視聴傾向を分析・把握するためのダッシュボードを構築する。

### 1.2 対象ユーザー
- 個人利用
- 自分の音楽視聴履歴を分析したいユーザー

## 2. 機能要件

### 2.1 必須機能

#### 2.1.1 総再生時間・再生回数表示
- **機能説明**: 全期間の総再生時間（時間単位）と総再生回数を表示
- **表示項目**:
  - 総再生時間（時間・分）
  - 総再生回数
  - 平均再生時間
  - データ期間（開始日〜終了日）

#### 2.1.2 アーティスト・楽曲ランキング
- **機能説明**: 再生回数によるランキング表示
- **表示項目**:
  - アーティストランキング（TOP 10〜50、設定可能）
    - アーティスト名
    - 再生回数
    - 総再生時間
    - 楽曲数
  - 楽曲ランキング（TOP 10〜50、設定可能）
    - 楽曲名
    - アーティスト名
    - 再生回数
    - 総再生時間
    - 平均再生時間

#### 2.1.3 日付・月・年ごとの再生履歴
- **機能説明**: 期間別の再生データを集計・表示
- **表示項目**:
  - 日別再生履歴
    - 日付
    - 再生回数
    - 再生時間
    - 最も再生されたアーティスト・楽曲
  - 月別再生履歴
    - 年月
    - 再生回数
    - 再生時間
    - 平均1日あたりの再生時間
  - 年別再生履歴
    - 年
    - 再生回数
    - 再生時間
    - 平均1日あたり・1ヶ月あたりの再生時間

#### 2.1.4 時系列グラフ
- **機能説明**: 再生履歴の時系列変化を視覚化
- **グラフ種別**:
  - 再生回数の時系列グラフ（折れ線グラフ・棒グラフ）
  - 再生時間の時系列グラフ（折れ線グラフ・棒グラフ）
  - 期間選択機能（日・週・月・年）
  - ズーム・パン機能

#### 2.1.5 ジャンル分析
- **機能説明**: ジャンル別の再生傾向を分析
- **表示項目**:
  - ジャンル別再生回数（円グラフ・棒グラフ）
  - ジャンル別再生時間
  - ジャンル別アーティスト数
  - 期間別ジャンル傾向の変化

### 2.2 UI要件

#### 2.2.1 レイアウト
- レスポンシブデザイン対応
- ダッシュボード形式（複数のウィジェット/カード表示）
- スクロール可能なレイアウト

#### 2.2.2 フィルター機能
- 期間フィルター（開始日〜終了日）
- データソース選択（複数ファイル対応時）

#### 2.2.3 インタラクティブ機能
- グラフのホバー効果（詳細情報表示）
- クリック可能な要素（ランキングから詳細表示など）
- グラフのズーム・パン操作

### 2.3 データ要件

#### 2.3.1 データソース
- **初期データ**: spotifyHistoryDataフォルダ内のJSONファイル（複数ファイル対応）
- **ファイル形式**: JSON配列
- **データ構造**:
  ```json
  [
    {
      "endTime": "2024-01-01 12:00:00",
      "artistName": "アーティスト名",
      "trackName": "楽曲名",
      "msPlayed": 180000
    }
  ]
  ```
- **将来のデータソース**: Spotify Web API（Recently Played Tracks）
  - 自動同期機能
  - リアルタイム更新（オプション）

#### 2.3.2 データ処理
- 複数JSONファイルの統合処理
- データの前処理（重複除去、不正データの除外）
- 高速なデータ読み込み・集計処理（Web Workerを活用）
- ジャンル情報の取得（Spotify APIから取得、または推定）

## 3. 非機能要件

### 3.1 パフォーマンス
- 初期データ読み込み: 5秒以内
- グラフ描画: 1秒以内
- フィルター適用: 1秒以内

### 3.2 互換性
- モダンブラウザ対応（Chrome、Firefox、Safari、Edge）
- モバイルデバイス対応（レスポンシブ）

### 3.3 デザイン要件
- モダンで洗練されたUI
- **ダークモード専用**（Spotify風のデザイン）
- Spotify風のデザイン（グリーンアクセント、グラデーションなど）

## 4. 技術要件

### 4.1 フロントエンド
- ✅ **フレームワーク**: Vue 3 + TypeScript
- ✅ **グラフライブラリ**: Chart.js / ECharts / Recharts（要検討）
- ✅ **UIライブラリ**: Tailwind CSS + カスタムコンポーネント
- ✅ **ビルドツール**: Vite

### 4.2 データ管理
- **初期データ**: spotifyHistoryDataフォルダ内のJSONファイル
- **自動更新**: Spotify Web API（将来実装）
  - 認証: OAuth 2.0
  - API: Spotify Web API（Recently Played Tracks）
  - データ同期: 定期更新（日次/週次）

### 4.3 デプロイメント
- ✅ **実行環境**: Webアプリケーション（SPA）
- ✅ **デプロイ先**: Firebase Hosting または Cloudflare Pages（無料プラン）
- ✅ **デプロイ方法**: 静的サイトホスティング

## 5. 実装優先順位

### Phase 1（MVP）
1. データ読み込み機能
2. 総再生時間・再生回数表示
3. アーティスト・楽曲ランキング（TOP 10）
4. 基本的な時系列グラフ

### Phase 2
1. 日付・月・年ごとの再生履歴
2. ジャンル分析
3. フィルター機能

### Phase 3
1. 詳細なインタラクティブ機能
2. デザインの洗練
3. パフォーマンス最適化

## 6. 今後の拡張機能（Phase 4以降）

### 6.1 Spotify API連携
- OAuth 2.0認証実装
- Recently Played Tracks API連携
- 自動データ同期機能
- リアルタイム更新（オプション）

### 6.2 追加機能
- エクスポート機能（CSV、画像）
- 共有機能（URL生成、SNS共有）
- カスタムレポート生成
- 音楽トレンドの可視化

## 7. 確定事項

✅ **技術スタック**: Vue 3 + TypeScript + Vite  
✅ **デザイン**: ダークモード + Spotify風デザイン  
✅ **デプロイ**: Firebase Hosting または Cloudflare Pages（無料プラン）  
✅ **データソース**: spotifyHistoryDataフォルダ内のJSONファイル（初期）→ Spotify API（将来）

